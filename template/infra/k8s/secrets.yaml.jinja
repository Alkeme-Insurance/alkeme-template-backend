# ============================================
# {{ project_name }} - Kubernetes Secrets
# ============================================
# NOTE: This is a template file for reference only.
# 
# DO NOT commit actual secrets to git!
#
# Create secrets from Azure Key Vault:
# ============================================
#
# After deploying infrastructure with deploy.sh, run:
#
# export KEY_VAULT_NAME="<vault-name-from-deployment>"
#
# kubectl create secret generic {{ package_name }}-secrets \
#   --from-literal=mongodb-uri="$(az keyvault secret show --vault-name $KEY_VAULT_NAME --name mongodb-uri --query value -o tsv)" \
{% if use_azure_auth -%}
#   --from-literal=azure-client-id="$(az keyvault secret show --vault-name $KEY_VAULT_NAME --name azure-client-id --query value -o tsv)" \
#   --from-literal=azure-tenant-id="$(az keyvault secret show --vault-name $KEY_VAULT_NAME --name azure-tenant-id --query value -o tsv)" \
{% endif -%}
#   --namespace {{ package_name }}
#
# ============================================

apiVersion: v1
kind: Secret
metadata:
  name: {{ package_name }}-secrets
  namespace: {{ package_name }}
type: Opaque
stringData:
  # These will be populated from Key Vault using the command above
  mongodb-uri: ""
{% if use_azure_auth -%}
  azure-client-id: ""
  azure-tenant-id: ""
  azure-api-scope: ""
{% endif -%}


